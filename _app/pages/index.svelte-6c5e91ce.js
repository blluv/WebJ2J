import{_ as K}from"../chunks/preload-helper-e4860ae8.js";import{S as Z,i as H,s as Q,e as A,k as M,t as X,L as Y,c as P,a as N,d as g,m as R,h as $,M as W,b as S,J as E,g as q,N as D,K as O,O as ee,v as te,P as re}from"../chunks/vendor-87c94948.js";function ne(e){let t,h,n,i,l,w,c,_,C,r,b,I,x,z,J,j;return{c(){t=A("script"),n=A("script"),l=M(),w=A("div"),c=A("div"),_=A("input"),C=M(),r=A("img"),I=M(),x=A("span"),z=X("\uC120\uD0DD\uD558\uAE30"),this.h()},l(d){const o=Y('[data-svelte="svelte-1neeb6f"]',document.head);t=P(o,"SCRIPT",{src:!0});var L=N(t);L.forEach(g),n=P(o,"SCRIPT",{src:!0});var U=N(n);U.forEach(g),o.forEach(g),l=R(d),w=P(d,"DIV",{class:!0});var B=N(w);c=P(B,"DIV",{class:!0});var p=N(c);_=P(p,"INPUT",{class:!0,type:!0}),C=R(p),r=P(p,"IMG",{class:!0,src:!0,alt:!0}),I=R(p),x=P(p,"SPAN",{});var s=N(x);z=$(s,"\uC120\uD0DD\uD558\uAE30"),s.forEach(g),p.forEach(g),B.forEach(g),this.h()},h(){W(t.src,h="https://cdn.jsdelivr.net/npm/web-streams-polyfill@2.0.2/dist/ponyfill.min.js")||S(t,"src",h),W(n.src,i="https://cdn.jsdelivr.net/npm/streamsaver@2.0.3/StreamSaver.min.js")||S(n,"src",i),S(_,"class","hidden"),S(_,"type","file"),S(r,"class","w-14 h-auto py-1"),W(r.src,b="file-text.svg")||S(r,"src",b),S(r,"alt","file_icon"),S(c,"class","rounded border border-gray-300 px-14 py-10 cursor-pointer"),S(w,"class","w-screen h-screen flex items-center justify-center flex-col select-none")},m(d,o){E(document.head,t),E(document.head,n),q(d,l,o),q(d,w,o),E(w,c),E(c,_),e[4](_),E(c,C),E(c,r),E(c,I),E(c,x),E(x,z),J||(j=[D(_,"change",e[5]),D(_,"change",e[3]),D(c,"click",e[2])],J=!0)},p:O,i:O,o:O,d(d){g(t),g(n),d&&g(l),d&&g(w),e[4](null),J=!1,ee(j)}}}const f=1024e4,V=32;function F(e){return new TextDecoder().decode(e)}function ie(e){return new TextEncoder().encode(e)}function se(e){if(e=new Uint8Array(e),e.slice(0,8).reduce((n,i)=>n+i)!=0)return;let t=e[8];if(e.slice(9,16).reduce((n,i)=>n+i)!=0)return;let h=parseInt(F(e.slice(16,24)),16);if(F(e.slice(24,32))=="L3000009")return{blockCount:t,crc:h}}function G(){let e=new Uint8Array(f);for(let t=0;t<=f;t++)e[t]=t%256;return e}function le(e){let t=G();e=ie(e);let h=!1,n=0,i=0;for(let l=0;l<f;l++){if(h){h=!1,n++;continue}n>=e.length&&(n=0,l+=1),h=!0,t[l]+=e[i++],i>=e.length&&(i=0)}return t}function ae(e,t,h){let n;te(async()=>{n=await K(()=>import("../chunks/StreamSaver-45bc9e71.js").then(function(r){return r.S}),[])});let i,l;function w(){l&&l.click()}async function c(){if(i&&i.length>0){let r=i[0],b=r.size,I=r.name,x=await r.slice(b-V).arrayBuffer();if(!se(x)){alert("J2J \uD30C\uC77C\uC774 \uC544\uB2D9\uB2C8\uB2E4.");return}let J=prompt("\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694");if(J==null){alert("\uCDE8\uC18C\uD558\uC168\uC2B5\uB2C8\uB2E4.");return}let j=prompt("\uCCAD\uD06C \uD06C\uAE30\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694 (\uBA54\uBAA8\uB9AC \uC0AC\uC6A9\uB7C9 \uACFC \uC18D\uB3C4\uAC00 \uBE44\uB840)","102400");if(j==null){alert("\uCDE8\uC18C\uD558\uC168\uC2B5\uB2C8\uB2E4.");return}if(isNaN(parseInt(j))){alert("\uC22B\uC790\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");return}let d=parseInt(j),o=Math.max(Math.floor(f/(b*100)),1),L;J==""?L=G():L=le(J);let U;I.endsWith(".j2j")||I.endsWith(".J2J")?U=I.substring(0,I.length-4):U=I+".dec";const p=n.createWriteStream(U,{size:b-V}).getWriter();for(let s=0;s<o;s++){let a=s*f,m=a+f,y=m-a,v=0;for(;y>0;){let T=a+d;T>m&&(T=m);let u=new Uint8Array(await r.slice(a,T).arrayBuffer());for(let k=0;k<u.byteLength;k++)u[k]^=L[v],L[v]^=u[k],v+=1;a+=u.byteLength,y-=u.byteLength,await p.write(u)}}{let s=o*f,a=b-o*f-V,m=a-s;for(;m>0;){let y=s+d;y>a&&(y=a);let v=new Uint8Array(await r.slice(s,y).arrayBuffer());m-=y-s,s+=v.byteLength,await p.write(v)}}for(let s=0;s<o;s++){let a=b-o*f-V+s*f,m=b-o*f-V+s*f+f,y=m-a,v=0;for(;y>0;){let T=a+d;T>m&&(T=m);let u=new Uint8Array(await r.slice(a,T).arrayBuffer());for(let k=0;k<u.byteLength;k++)u[k]^=L[v],L[v]^=u[k],v+=1;a+=u.byteLength,y-=u.byteLength,await p.write(u)}}p.close()}}function _(r){re[r?"unshift":"push"](()=>{l=r,h(1,l)})}function C(){i=this.files,h(0,i)}return[i,l,w,c,_,C]}class ue extends Z{constructor(t){super();H(this,t,ae,ne,Q,{})}}export{ue as default};
