import{_ as F}from"../chunks/preload-helper-e4860ae8.js";import{S as G,i as K,s as Z,e as A,k as B,t as H,L as Q,c as P,a as U,d as v,m as M,h as X,M as R,b as k,J as E,g as O,N as W,K as D,O as Y,v as $,P as ee}from"../chunks/vendor-87c94948.js";function te(e){let r,h,n,s,a,y,o,p,C,i,w,g,x,V,J,b;return{c(){r=A("script"),n=A("script"),a=B(),y=A("div"),o=A("div"),p=A("input"),C=B(),i=A("img"),g=B(),x=A("span"),V=H("\uC120\uD0DD\uD558\uAE30"),this.h()},l(c){const _=Q('[data-svelte="svelte-1neeb6f"]',document.head);r=P(_,"SCRIPT",{src:!0});var N=U(r);N.forEach(v),n=P(_,"SCRIPT",{src:!0});var j=U(n);j.forEach(v),_.forEach(v),a=M(c),y=P(c,"DIV",{class:!0});var l=U(y);o=P(l,"DIV",{class:!0});var t=U(o);p=P(t,"INPUT",{class:!0,type:!0}),C=M(t),i=P(t,"IMG",{class:!0,src:!0,alt:!0}),g=M(t),x=P(t,"SPAN",{});var u=U(x);V=X(u,"\uC120\uD0DD\uD558\uAE30"),u.forEach(v),t.forEach(v),l.forEach(v),this.h()},h(){R(r.src,h="https://cdn.jsdelivr.net/npm/web-streams-polyfill@2.0.2/dist/ponyfill.min.js")||k(r,"src",h),R(n.src,s="https://cdn.jsdelivr.net/npm/streamsaver@2.0.3/StreamSaver.min.js")||k(n,"src",s),k(p,"class","hidden"),k(p,"type","file"),k(i,"class","w-14 h-auto py-1"),R(i.src,w="file-text.svg")||k(i,"src",w),k(i,"alt","file_icon"),k(o,"class","rounded border border-gray-300 px-14 py-10 cursor-pointer"),k(y,"class","w-screen h-screen flex items-center justify-center flex-col select-none")},m(c,_){E(document.head,r),E(document.head,n),O(c,a,_),O(c,y,_),E(y,o),E(o,p),e[4](p),E(o,C),E(o,i),E(o,g),E(o,x),E(x,V),J||(b=[W(p,"change",e[5]),W(p,"change",e[3]),W(o,"click",e[2])],J=!0)},p:D,i:D,o:D,d(c){v(r),v(n),c&&v(a),c&&v(y),e[4](null),J=!1,Y(b)}}}const d=1024e4,L=32;function q(e){return new TextDecoder().decode(e)}function re(e){return new TextEncoder().encode(e)}function ie(e){if(e=new Uint8Array(e),e.slice(0,8).reduce((n,s)=>n+s)!=0)return;let r=e[8];if(e.slice(9,16).reduce((n,s)=>n+s)!=0)return;let h=parseInt(q(e.slice(16,24)),16);if(q(e.slice(24,32))=="L3000009")return{blockCount:r,crc:h}}function z(){let e=new Uint8Array(d);for(let r=0;r<=d;r++)e[r]=r%256;return e}function ne(e){let r=z();e=re(e);let h=!1,n=0,s=0;for(let a=0;a<d;a++){if(h){h=!1,n++;continue}n>=e.length&&(n=0,a+=1),h=!0,r[a]+=e[s++],s>=e.length&&(s=0)}return r}function se(e,r,h){let n;$(async()=>{n=await F(()=>import("../chunks/StreamSaver-45bc9e71.js").then(function(i){return i.S}),[])});let s,a;function y(){a&&a.click()}async function o(){if(s&&s.length>0){let i=s[0],w=i.size,g=i.name,x=await i.slice(w-L).arrayBuffer();if(!ie(x)){alert("J2J \uD30C\uC77C\uC774 \uC544\uB2D9\uB2C8\uB2E4.");return}let J=prompt("\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694");if(J==null){alert("\uCDE8\uC18C\uD558\uC168\uC2B5\uB2C8\uB2E4.");return}let b=Math.max(Math.floor(d/(w*100)),1),c;J==""?c=z():c=ne(J);let _;g.endsWith(".j2j")||g.endsWith(".J2J")?_=g.substring(0,g.length-4):_=g+".dec";const j=n.createWriteStream(_,{size:w-L}).getWriter();for(let l=0;l<=b;l++){let t=l*d,u=t+d,m=u-t,f=0;for(;m>0;){let S=t+10240;S>u&&(S=u);let I=new Uint8Array(await i.slice(t,S).arrayBuffer());for(let T=0;T<I.byteLength;T++)f+=T,I[f]^=c[f],c[f]^=I[f];await j.write(I),m-=S-t}}{let l=b*d,t=w-b*d-L,u=t-l;for(;u>0;){let m=l+10240;m>t&&(m=t);let f=new Uint8Array(await i.slice(l,m).arrayBuffer());await j.write(f),u-=m-l}}for(let l=0;l<=b;l++){let t=w-b*d-L+l*d,u=w-b*d-L+l*d+d,m=u-t,f=0;for(;m>0;){let S=t+10240;S>u&&(S=u);let I=new Uint8Array(await i.slice(t,S).arrayBuffer());for(let T=0;T<I.byteLength;T++)f+=T,I[f]^=c[f],c[f]^=I[f];await j.write(I),m-=S-t}}j.close()}}function p(i){ee[i?"unshift":"push"](()=>{a=i,h(1,a)})}function C(){s=this.files,h(0,s)}return[s,a,y,o,p,C]}class ce extends G{constructor(r){super();K(this,r,se,te,Z,{})}}export{ce as default};
