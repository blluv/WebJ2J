function U(g,s){return s.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(i){if(i!=="default"&&!(i in g)){var b=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(g,i,b.get?b:{enumerable:!0,get:function(){return t[i]}})}})}),Object.freeze(Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}))}var M={exports:{}};/*! streamsaver. MIT License. Jimmy WÃ¤rting <https://jimmy.warting.se/opensource> */(function(g){((s,t)=>{g.exports=t()})("streamSaver",()=>{const s=typeof window=="object"?window:this;s.HTMLElement||console.warn("streamsaver is meant to run on browsers main thread");let t=null,i=!1;const b=n=>{try{n()}catch{}},j=s.WebStreamsPolyfill||{},S=s.isSecureContext;let p=/constructor/i.test(s.HTMLElement)||!!s.safari||!!s.WebKitPoint;const y=S||"MozAppearance"in document.documentElement.style?"iframe":"navigate",m={createWriteStream:W,WritableStream:s.WritableStream||j.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function v(n){if(!n)throw new Error("meh");const e=document.createElement("iframe");return e.hidden=!0,e.src=n,e.loaded=!1,e.name="iframe",e.isIframe=!0,e.postMessage=(...l)=>e.contentWindow.postMessage(...l),e.addEventListener("load",()=>{e.loaded=!0},{once:!0}),document.body.appendChild(e),e}function L(n){const e="width=200,height=100",l=document.createDocumentFragment(),a={frame:s.open(n,"popup",e),loaded:!1,isIframe:!1,isPopup:!0,remove(){a.frame.close()},addEventListener(...r){l.addEventListener(...r)},dispatchEvent(...r){l.dispatchEvent(...r)},removeEventListener(...r){l.removeEventListener(...r)},postMessage(...r){a.frame.postMessage(...r)}},f=r=>{r.source===a.frame&&(a.loaded=!0,s.removeEventListener("message",f),a.dispatchEvent(new Event("load")))};return s.addEventListener("message",f),a}try{new Response(new ReadableStream),S&&!("serviceWorker"in navigator)&&(p=!0)}catch{p=!0}b(()=>{const{readable:n}=new TransformStream,e=new MessageChannel;e.port1.postMessage(n,[n]),e.port1.close(),e.port2.close(),i=!0,Object.defineProperty(m,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})});function C(){t||(t=S?v(m.mitm):L(m.mitm))}function W(n,e,l){let a={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},f=0,r=null,o=null,w=null;if(Number.isFinite(e)?([l,e]=[e,l],console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),a.size=l,a.writableStrategy=e):e&&e.highWaterMark?(console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),a.size=l,a.writableStrategy=e):a=e||{},!p){C(),o=new MessageChannel,n=encodeURIComponent(n.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const c={transferringReadable:i,pathname:a.pathname||Math.random().toString().slice(-6)+"/"+n,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+n}};a.size&&(c.headers["Content-Length"]=a.size);const u=[c,"*",[o.port2]];if(i){const d=y==="iframe"?void 0:{transform(E,P){if(!(E instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");f+=E.length,P.enqueue(E),r&&(location.href=r,r=null)},flush(){r&&(location.href=r)}};w=new m.TransformStream(d,a.writableStrategy,a.readableStrategy);const T=w.readable;o.port1.postMessage({readableStream:T},[T])}o.port1.onmessage=d=>{d.data.download?y==="navigate"?(t.remove(),t=null,f?location.href=d.data.download:r=d.data.download):(t.isPopup&&(t.remove(),t=null,y==="iframe"&&v(m.mitm)),v(d.data.download)):d.data.abort&&(h=[],o.port1.postMessage("abort"),o.port1.onmessage=null,o.port1.close(),o.port2.close(),o=null)},t.loaded?t.postMessage(...u):t.addEventListener("load",()=>{t.postMessage(...u)},{once:!0})}let h=[];return!p&&w&&w.writable||new m.WritableStream({write(c){if(!(c instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");if(p){h.push(c);return}o.port1.postMessage(c),f+=c.length,r&&(location.href=r,r=null)},close(){if(p){const c=new Blob(h,{type:"application/octet-stream; charset=utf-8"}),u=document.createElement("a");u.href=URL.createObjectURL(c),u.download=n,u.click()}else o.port1.postMessage("end")},abort(){h=[],o.port1.postMessage("abort"),o.port1.onmessage=null,o.port1.close(),o.port2.close(),o=null}},a.writableStrategy)}return m})})(M);var A=M.exports,O=U({__proto__:null,default:A},[M.exports]);export{O as S};
